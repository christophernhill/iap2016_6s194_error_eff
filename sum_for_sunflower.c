#include "sf-types.h"
#include "sh7708.h"
#include "devscc.h"
#include "print.h"

// #include <stdio.h>
typedef union {
  float f;
  struct {
    unsigned int mantisa_change : 12;  //that's how many bits we want to change in mantisa
    unsigned int mantisa : 11;
    unsigned int exponent : 8;
    unsigned int sign : 1;
  } parts;
} double_cast;

int startup(void) {
  float sum_unchanged;
  sum_unchanged = 0.0;
  float sum_changed;
  sum_changed = 0.0;

double_cast d0;
d0.f = 0.277665376663208;
double_cast d1;
d1.f = 0.468185216188431; 
double_cast d2;
d2.f = 0.848089158535004;
double_cast d3;
d3.f = 0.812178075313568;
double_cast d4;
d4.f = 0.144561871886253;
double_cast d5;
d5.f = 0.773814678192139;
double_cast d6;
d6.f = 0.577883958816528;
double_cast d7;
d7.f = 0.260616749525070;
double_cast d8;
d8.f = 0.667387008666992;
double_cast d9;
d9.f = 0.777513384819031;
double_cast d10;
d10.f = 0.877746045589447;
double_cast d11;
d11.f = 0.696212768554688;
double_cast d12;
d12.f = 0.185634091496468;
double_cast d13;
d13.f = 0.563300311565399;
double_cast d14;
d14.f = 0.375934690237045;
double_cast d15;
d15.f = 0.754235088825226;
double_cast d16;
d16.f = 0.642612934112549;
double_cast d17;
d17.f = 0.885354280471802;
double_cast d18;
d18.f = 0.453105658292770;
double_cast d19;
d19.f = 0.108730345964432;
double_cast d20;
d20.f = 0.754325449466705;
double_cast d21;
d21.f = 0.762299656867981;
double_cast d22;
d22.f = 0.295068919658661;
double_cast d23;
d23.f = 0.706668853759766;
double_cast d24;
d24.f = 0.354037255048752;
double_cast d25;
d25.f = 0.146702736616135;
double_cast d26;
d26.f = 0.280755847692490;
double_cast d27;
d27.f = 0.440449029207230;
double_cast d28;
d28.f = 0.313540995121002;
double_cast d29;
d29.f = 0.961583614349365;
double_cast d30;
d30.f = 0.372385948896408;
double_cast d31;
d31.f = 0.591206371784210;
double_cast d32;
d32.f = 0.429768830537796;
double_cast d33;
d33.f = 0.220475062727928;
double_cast d34;
d34.f = 0.403384417295456;
double_cast d35;
d35.f = 0.574330687522888;
double_cast d36;
d36.f = 0.994289755821228;
double_cast d37;
d37.f = 0.981268405914307;
double_cast d38;
d38.f = 0.834947407245636;
double_cast d39;
d39.f = 0.661676764488220;
double_cast d40;
d40.f = 0.758781790733337;
double_cast d41;
d41.f = 0.712693452835083;
double_cast d42;
d42.f = 0.357889562845230;
double_cast d43;
d43.f = 0.944415867328644;
double_cast d44;
d44.f = 0.275993794202805;
double_cast d45;
d45.f = 0.733824253082275;
double_cast d46;
d46.f = 0.698650956153870;
double_cast d47;
d47.f = 0.918606698513031;
double_cast d48;
d48.f = 0.619178533554077;
double_cast d49;
d49.f = 0.151756644248962;
double_cast d50;
d50.f = 0.027337055653334;
double_cast d51;
d51.f = 0.373503983020782;
double_cast d52;
d52.f = 0.914056301116943;
double_cast d53;
d53.f = 0.322405964136124;
double_cast d54;
d54.f = 0.080172844231129;
double_cast d55;
d55.f = 0.268093556165695;
double_cast d56;
d56.f = 0.469108700752258;
double_cast d57;
d57.f = 0.360928714275360;
double_cast d58;
d58.f = 0.708542585372925;
double_cast d59;
d59.f = 0.782649695873260;
double_cast d60;
d60.f = 0.322512328624725;
double_cast d61;
d61.f = 0.080928504467010;
double_cast d62;
d62.f = 0.373856037855148;
double_cast d63;
d63.f = 0.752281129360199;
double_cast d64;
d64.f = 0.301403582096100;
double_cast d65;
d65.f = 0.777240455150604;
double_cast d66;
d66.f = 0.326611816883087;
double_cast d67;
d67.f = 0.295693308115005;
double_cast d68;
d68.f = 0.758508861064911;
double_cast d69;
d69.f = 0.161559253931046;
double_cast d70;
d70.f = 0.957370102405548;
double_cast d71;
d71.f = 0.517290651798248;
double_cast d72;
d72.f = 0.874252736568451;
double_cast d73;
d73.f = 0.315259635448456;
double_cast d74;
d74.f = 0.461706548929214;
double_cast d75;
d75.f = 0.150246500968933;
double_cast d76;
d76.f = 0.049083903431892;
double_cast d77;
d77.f = 0.160357519984245;
double_cast d78;
d78.f = 0.068853214383125;
double_cast d79;
d79.f = 0.668262422084808;
double_cast d80;
d80.f = 0.312114179134369;
double_cast d81;
d81.f = 0.096190273761749;
double_cast d82;
d82.f = 0.041766420006752;
double_cast d83;
d83.f = 0.226170480251312;
double_cast d84;
d84.f = 0.418596237897873;
double_cast d85;
d85.f = 0.121939264237881;
double_cast d86;
d86.f = 0.494264006614685;
double_cast d87;
d87.f = 0.887704908847809;
double_cast d88;
d88.f = 0.482867956161499;
double_cast d89;
d89.f = 0.202806577086449;
double_cast d90;
d90.f = 0.670354604721069;
double_cast d91;
d91.f = 0.805380284786224;
double_cast d92;
d92.f = 0.283735096454620;
double_cast d93;
d93.f = 0.044210638850927;
double_cast d94;
d94.f = 0.557661414146423;
double_cast d95;
d95.f = 0.585138678550720;
double_cast d96;
d96.f = 0.821451067924500;
double_cast d97;
d97.f = 0.884273231029510;
double_cast d98;
d98.f = 0.880831956863403;
double_cast d99;
d99.f = 0.579959928989410;


double_cast unchanged[100];

unchanged[0] = d0;
unchanged[1] = d1; 
unchanged[2] = d2;
unchanged[3] = d3;
unchanged[4] = d4;
unchanged[5] = d5;
unchanged[6] = d6;
unchanged[7] = d7;
unchanged[8] = d8;
unchanged[9] = d9; 
unchanged[10] = d10;
unchanged[11] = d11;
unchanged[12] = d12;
unchanged[13] = d13;
unchanged[14] = d14;
unchanged[15] = d15;
unchanged[16] = d16;
unchanged[17] = d17;
unchanged[18] = d18;
unchanged[19] = d19;
unchanged[20] = d20;
unchanged[21] = d21;
unchanged[22] = d22;
unchanged[23] = d23;
unchanged[24] = d24; 
unchanged[25] = d25;
unchanged[26] = d26;
unchanged[27] = d27;
unchanged[28] = d28;
unchanged[29] = d29;
unchanged[30] = d30;
unchanged[31] = d31;
unchanged[32] = d32;
unchanged[33] = d33;
unchanged[34] = d34;
unchanged[35] = d35;
unchanged[36] = d36;
unchanged[37] = d37;
unchanged[38] = d38;
unchanged[39] = d39;
unchanged[40] = d40;
unchanged[41] = d41;
unchanged[42] = d42;
unchanged[43] = d43;
unchanged[44] = d44;
unchanged[45] = d45;
unchanged[46] = d46;
unchanged[47] = d47;
unchanged[48] = d48;
unchanged[49] = d49;
unchanged[50] = d50;
unchanged[51] = d51;
unchanged[52] = d52;
unchanged[53] = d53;
unchanged[54] = d54;
unchanged[55] = d55;
unchanged[56] = d56;
unchanged[57] = d57;
unchanged[58] = d58;
unchanged[59] = d59;
unchanged[60] = d60;
unchanged[61] = d61;
unchanged[62] = d62;
unchanged[63] = d63;
unchanged[64] = d64;
unchanged[65] = d65;
unchanged[66] = d66;
unchanged[67] = d67;
unchanged[68] = d68;
unchanged[69] = d69;
unchanged[70] = d70;
unchanged[71] = d71;
unchanged[72] = d72;
unchanged[73] = d73;
unchanged[74] = d74;
unchanged[75] = d75;
unchanged[76] = d76;
unchanged[77] = d77;
unchanged[78] = d78;
unchanged[79] = d79;
unchanged[80] = d80;
unchanged[81] = d81;
unchanged[82] = d82;
unchanged[83] = d83;
unchanged[84] = d84;
unchanged[85] = d85;
unchanged[86] = d86;
unchanged[87] = d87;
unchanged[88] = d88;
unchanged[89] = d89;
unchanged[90] = d90;
unchanged[91] = d91;
unchanged[92] = d92;
unchanged[93] = d93;
unchanged[94] = d94;
unchanged[95] = d95;
unchanged[96] = d96;
unchanged[97] = d97;
unchanged[98] = d98;
unchanged[99] = d99;

double_cast changed[100];
  
  int i;
  for( i = 0; i < sizeof(unchanged)/sizeof(double_cast); i++){
     //printf("before change = %f\n",unchanged[i].f);
     //printf("mantisa = %x\n",unchanged[i].parts.mantisa);
     //printf("mantisa_change = %x\n", unchanged[i].parts.mantisa_change);
     // changed[i] = unchanged[i];
     changed[i] = (double_cast)((float)0.);
     changed[i].parts.mantisa_change = 0x000;
     // changed[i].parts.mantisa_change = 0x000;
     //printf("after change = %f\n",changed[i].f);
     //printf("mantisa_change = %x\n\n", changed[i].parts.mantisa_change);

  }

  sum_unchanged = 0.0;
  sum_changed = 0.0;
  for(i = 0; i < sizeof(unchanged)/sizeof(double_cast); i++){
     // sum_unchanged = sum_unchanged + (float)unchanged[i].f;
     sum_changed = sum_changed + (float)changed[i].f;
  }

  sum_unchanged = 0.0;
  sum_changed = 0.0;
  for(i = 0; i < sizeof(unchanged)/sizeof(double_cast); i++){
     // sum_unchanged = sum_unchanged + (float)unchanged[i].f;
     sum_changed = sum_changed + (float)changed[i].f;
  }

  // printf("the sum before change is: %f\n", sum_unchanged);
  // printf("the sum after change is: %f\n", sum_changed);
  
  return 0;
}
